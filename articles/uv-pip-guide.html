<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>使用 uv pip 管理项目环境：Python 开发新选择 - JJasonSun</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Prism.js CSS (主题：Okaidia，类似 Monokai) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css">
    <!-- Prism.js Toolbar & Plugins CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css">
    
    <style>
        .article-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
            background: #fff;
            min-height: 100vh;
        }

        .article-header {
            margin-bottom: 40px;
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .article-title {
            font-size: 2.5rem;
            color: var(--secondary-color);
            margin-bottom: 15px;
            line-height: 1.3;
        }

        .article-meta {
            color: #666;
            font-size: 0.9rem;
        }

        .article-content {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #333;
        }

        .article-content h2 {
            font-size: 1.8rem;
            color: var(--secondary-color);
            margin: 40px 0 20px;
            padding-left: 15px;
            border-left: 5px solid var(--primary-color);
        }

        .article-content h3 {
            font-size: 1.4rem;
            color: #444;
            margin: 30px 0 15px;
        }

        .article-content p {
            margin-bottom: 20px;
        }

        .article-content ul {
            list-style: disc;
            padding-left: 20px;
            margin-bottom: 20px;
        }

        .article-content li {
            margin-bottom: 10px;
        }

        /* 引用块样式优化 */
        .callout {
            padding: 20px;
            border-radius: 8px;
            margin: 25px 0;
            border-left: 5px solid;
        }

        .callout.info {
            background-color: #e3f2fd;
            border-color: #2196f3;
            color: #0d47a1;
        }

        .callout.warning {
            background-color: #fff3e0;
            border-color: #ff9800;
            color: #e65100;
        }

        .callout-title {
            font-weight: bold;
            display: block;
            margin-bottom: 10px;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 1px;
        }

        /* Prism 代码块微调 */
        pre[class*="language-"] {
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        code[class*="language-"] {
            font-family: 'Fira Code', Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
            font-size: 0.95em;
        }

        /* 行内代码样式 */
        :not(pre) > code {
            background-color: #f3f4f6;
            color: #e91e63;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: Consolas, monospace;
            font-size: 0.9em;
        }

        .back-nav {
            margin-bottom: 30px;
        }

        .back-nav a {
            display: inline-flex;
            align-items: center;
            color: var(--primary-color);
            font-weight: 600;
            transition: transform 0.2s;
        }

        .back-nav a:hover {
            transform: translateX(-5px);
        }

        .back-nav i {
            margin-right: 8px;
        }
    </style>
</head>
<body>
    <!-- 复用导航栏 (静态) -->
    <nav class="navbar">
        <div class="container">
            <a href="../index.html" class="logo">JJasonSun</a>
            <ul class="nav-links">
                <li><a href="../index.html#home">首页</a></li>
                <li><a href="../index.html#about">关于我</a></li>
                <li><a href="../index.html#blog">博客</a></li>
                <li><a href="../index.html#contact">联系方式</a></li>
            </ul>
        </div>
    </nav>

    <div class="article-container">
        <div class="back-nav">
            <a href="../index.html#blog"><i class="fas fa-arrow-left"></i> 返回文章列表</a>
        </div>

        <header class="article-header">
            <h1 class="article-title">使用 uv pip 管理项目环境：Python 开发新选择</h1>
            <div class="article-meta">
                <span><i class="far fa-calendar-alt"></i> 2024-01-20</span>
                <span style="margin: 0 10px">|</span>
                <span><i class="far fa-folder"></i> Python 工具</span>
            </div>
        </header>

        <article class="article-content">
            <div class="callout info">
                <span class="callout-title">核心逻辑</span>
                <p><strong>uv 分为两种使用模式：</strong></p>
                <ul>
                    <li><strong>「项目模式」</strong>：默认用 <code>pyproject.toml</code> 管理依赖（适合需要打包、共享的项目）；</li>
                    <li><strong>「无配置模式」</strong>：用 <code>uv pip</code> 命令，完全兼容 pip 语法，不用任何配置文件（适合机器学习、快速实验类项目）。</li>
                </ul>
                <p>流程简述：<code>.venv + requirements.txt + uv pip install</code></p>
            </div>

            <h2>无 Python 安装 UV</h2>
            
            <h3>在线一键脚本（最省事）</h3>
            <pre><code class="language-powershell"># 1. 设置环境变量（注意末尾的斜杠不能少）
# export GITHUB_MIRROR=https://mirror.ghproxy.com/

# 2. 验证变量是否生效
# echo $GITHUB_MIRROR  # 应输出 https://mirror.ghproxy.com/

# 官方安装脚本会自动把可执行文件放到 ~/.cargo/bin 并写 PATH
curl -LsSf https://astral.sh/uv/install.sh | sh
source ~/.cargo/env      # 让当前终端立即生效
uv --version             # 验证</code></pre>

            <pre><code class="language-powershell"># 以管理员权限打开 PowerShell，执行
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
# 安装程序会把 uv.exe 放到 C:\Users\<你>\.local\bin
# 按提示把该目录加进 PATH 后，重新打开终端
uv --version</code></pre>

            <p>全程不需要 Python，脚本里已经附带对应平台的二进制包。</p>

            <h3>离线手动下载（内网 / 机器没 curl）</h3>
            <ol>
                <li>
                    在能上网的电脑打开 <a href="https://github.com/astral-sh/uv/releases/latest" target="_blank">GitHub Releases</a> 下载对应压缩包：
                    <ul>
                        <li>Windows 10+ 64bit → <code>uv-x86_64-pc-windows-msvc.zip</code></li>
                        <li>Linux x86_64 → <code>uv-x86_64-unknown-linux-gnu.tar.gz</code></li>
                        <li>macOS Apple Silicon → <code>uv-aarch64-apple-darwin.tar.gz</code></li>
                    </ul>
                </li>
                <li>
                    解压后得到单文件 <code>uv</code>（或 <code>uv.exe</code>），把它放到：
                    <ul>
                        <li>Windows：<code>C:\Users\&lt;你&gt;\.local\bin\</code></li>
                        <li>Linux/macOS：<code>~/.local/bin/</code> 或 <code>/usr/local/bin/</code></li>
                    </ul>
                    并确保该目录已在系统 PATH 中。
                </li>
                <li>
                    终端执行：
                    <pre><code class="language-powershell">uv --version</code></pre>
                </li>
            </ol>

            <p>装完就能直接管理 Python 版本与虚拟环境：</p>

            <pre><code class="language-powershell"># 让 uv 自己下载一个 Python 解释器
uv python install 3.12

# 建虚拟环境
uv venv --python 3.12

# 装包
uv pip install requests

# 运行脚本
uv run python your_script.py</code></pre>

            <p>全程无需系统里先装 Python，uv 会自动下载所需解释器。</p>

            <hr>

            <h2>初始化：为项目创建 .venv 虚拟环境</h2>
            <h3>在项目根目录</h3>
            <pre><code class="language-powershell">uv venv 
# 或者
uv venv --python 3.12 # 省略路径时，uv 默认使用 .venv 这个名字
# 或者 
uv venv --python 3.12 new_env # 把环境建在 new_env/ 文件夹里</code></pre>

            <div class="callout info">
                <span class="callout-title">说明</span>
                <ul>
                    <li>这会在当前目录下新建一个 <code>.venv</code>（只对这个项目生效）。</li>
                    <li>以后所有 Python 相关操作，都通过 <code>uv</code> 调用 .venv，不需要自己 <code>activate</code>。</li>
                </ul>
            </div>

            <h3>UV 虚拟环境的本质</h3>
            <div class="callout warning">
                <span class="callout-title">注意</span>
                <p><code>uv</code> 创建的虚拟环境 <strong>不包含 Python 解释器本身</strong>，只记录了 <strong>绝对路径</strong> 指向原来的解释器。</p>
                <ul>
                    <li>如果使用 <code>uv venv</code>（不带版本），uv 会按 <code>PATH</code> 顺序找系统里已安装的任何 Python。</li>
                    <li>如果使用 <code>uv venv --python 3.12</code>，uv 会优先使用它自己工具箱里下载的便携版 Python。</li>
                    <li>本质上：<code>.venv</code> 里只有依赖包，Python 解释器由 uv 统一管理。</li>
                </ul>
            </div>

            <hr>

            <h2>安装和维护依赖（核心三件事）</h2>
            <h3>首次安装依赖</h3>
            <p>直接用 <code>uv pip install</code> 往 .venv 里装包：</p>

            <pre><code class="language-powershell">uv pip install pymysql requests beautifulsoup4 neo4j
uv pip install -r requirements.txt</code></pre>

            <div class="callout warning">
                <span class="callout-title">警告</span>
                <p><code>uv pip install</code> 只把包装进 <strong>当前虚拟环境</strong> 的 <code>site-packages</code> 目录，<strong>不会</strong> 动到系统 Python。</p>
                <p><strong>虚拟环境 = 独立仓库</strong>。删掉虚拟环境，系统 Python 依旧干净。</p>
            </div>

            <h3>导出或更新 requirements.txt</h3>
            <p>当你对依赖比较满意时，把当前环境“冻结”下来：</p>
            <pre><code class="language-powershell">uv pip freeze > requirements.txt</code></pre>

            <hr>

            <h2>其他</h2>
            <h3>要查看可用和已安装的 Python 版本</h3>
            <pre><code class="language-powershell">uv python list</code></pre>

            <h3>移动 .venv</h3>
            <div class="callout info">
                <span class="callout-title">移动说明</span>
                <p>可以放心把整个项目（含 <code>.venv</code>）剪切或复制到别处、另一台机器都行。</p>
                <ol>
                    <li>从 0.5.0 起，uv 默认生成 <strong>“可重定位”</strong> 虚拟环境。</li>
                    <li>即使到了没有 Python 的新电脑，只需运行一次 <code>uv sync</code> 或 <code>uv venv</code>，uv 就会自动下载 Python 并重新链接，<strong>原来装好的包依旧有效</strong>。</li>
                </ol>
                <p><strong>一句话：项目连同 .venv 想搬就搬，uv 不会掉链子。</strong></p>
            </div>
        </article>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2024 JJasonSun. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- Prism.js Core -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <!-- Prism.js Language Support -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-powershell.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <!-- Prism.js Plugins: Toolbar (Required for Copy & Show Language) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <!-- Prism.js Plugins: Copy to Clipboard -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
    <!-- Prism.js Plugins: Show Language -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/show-language/prism-show-language.min.js"></script>

</body>
</html>